<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Genetic Network Builder</title>

  <!-- Cytoscape -->
  <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>

  <!-- Cytoscape SVG export plugin -->
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-svg@0.4.0/cytoscape-svg.js"></script>

  <!-- Optional layout (nice directed layout). If blocked, it falls back gracefully. -->
  <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
  <script src="https://unpkg.com/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>

  <style>
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .wrap { display: grid; grid-template-columns: 360px 1fr; height: 100vh; }
    .panel {
      padding: 14px; border-right: 1px solid #ddd; background: #fafafa;
      overflow: auto;
    }
    .panel h1 { font-size: 18px; margin: 0 0 10px; }
    label { display: block; font-size: 12px; margin: 10px 0 4px; }
    input, select, textarea, button {
      width: 100%; box-sizing: border-box; padding: 10px; border: 1px solid #ccc; border-radius: 10px;
      font-size: 14px;
    }
    textarea { min-height: 70px; resize: vertical; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .btnrow { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
    .hint { font-size: 12px; color: #555; margin-top: 10px; line-height: 1.35; }
    .status { margin-top: 10px; font-size: 12px; padding: 10px; border-radius: 10px; background: #fff; border: 1px solid #eee; }
    #cy { width: 100%; height: 100%; }
    .small { font-size: 12px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    button { cursor: pointer; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <h1>Genetic Network Builder</h1>

      <div class="row">
        <div>
          <label for="source">Source gene</label>
          <input id="source" placeholder="e.g., X" />
        </div>
        <div>
          <label for="target">Target gene</label>
          <input id="target" placeholder="e.g., Y" />
        </div>
      </div>

      <label for="itype">Interaction type</label>
      <select id="itype">
        <option value="activates">activates</option>
        <option value="inhibits">inhibits</option>
      </select>
      <label for="autolayout" style="margin-top:12px;">Layout</label>
      <select id="autolayout">
        <option value="on" selected>Auto-layout: On</option>
        <option value="off">Auto-layout: Off (keep my arrangement)</option>
      </select>

      <label for="pmid">Evidence PMID</label>
      <input id="pmid" placeholder="e.g., 12345678" />

      <label for="note">Optional note (shown in Operation / Details)</label>
      <textarea id="note" placeholder="Short evidence note (optional)"></textarea>

      <div class="btnrow">
        <button id="addEdge">Add / Update edge</button>
        <button id="clear">Clear network</button>
      </div>

      <div class="btnrow">
        <button id="exportPng">Export PNG</button>
        <button id="exportSvg">Export SVG</button>
      </div>
      
      <div class="btnrow">
        <button id="deleteNode">Delete node</button>
        <button id="deleteEdge">Delete edge</button>
      </div>
      
      <div class="btnrow">
        <button id="exportJson">Export JSON</button>
        <button id="importJson">Import JSON</button>
      </div>

      <div class="hint">
        <div class="small">
          Tips:
          <ul>
            <li>Nodes are auto-created when you add an interaction.</li>
            <li>Click edges to see PMIDs in Operations / Details.</li>
            <li>Export JSON to share the “official” class network.</li>
          </ul>
        </div>
      </div>

      <div class="status" id="status">Ready.</div>
      <label for="note">Operations / Details</label>
      <textarea class="mono" id="jsonBox" style="margin-top:10px; display:none;" placeholder="Paste JSON here to import, or copy exported JSON."></textarea>
      <button id="doImport" style="margin-top:10px; display:none;">Load pasted JSON</button>
    </div>

    <div id="cy"></div>
  </div>

<script>
  // --- Utilities ---
  const STORAGE_KEY = "genetic_network_v1";
  
  // URL & embedding info
  const params = new URLSearchParams(window.location.search);
  
  // True if the app is running inside an iframe (e.g. Canvas embed)
  const IN_IFRAME = (window.self !== window.top);
  
  // Mode from URL, default to *view* (safer default than edit)
  const MODE = (params.get("mode") || "view").toLowerCase();
  
  // Simple “edit key” so only your special URL can truly be in edit mode
  // Feel free to change this string to anything you like.
  const EDIT_KEY_REQUIRED = "EDIT_462_SP26";
  const EDIT_KEY = params.get("editkey") || "";
  
  // Final gate: we’re view-only if: embedded in iframe (Canvas), mode is not "edit", OR
  //  the editkey doesn’t match
  const IS_VIEW_ONLY = IN_IFRAME || MODE !== "edit" || EDIT_KEY !== EDIT_KEY_REQUIRED;
  
  function setStatusText(msg) {
    document.getElementById("status").textContent = msg;
  }
  
  function setStatusHtml(html) {
    document.getElementById("status").innerHTML = html;
  }
  
  function applyModeUI() {
  // If not view-only, restore normal UI/tips and exit
  if (!IS_VIEW_ONLY) {
    // Make sure editor controls are visible (in case you toggled modes in-session)
    const idsToShow = [
      "source","target","itype","autolayout","pmid","note",
      "addEdge","clear","deleteNode","deleteEdge","exportJson","importJson","doImport","jsonBox"
    ];
    for (const id of idsToShow) {
      const el = document.getElementById(id);
      if (el) el.style.display = "";
    }
    // show labels again (best-effort)
    const labels = document.querySelectorAll('label[for="source"],label[for="target"],label[for="itype"],label[for="autolayout"],label[for="pmid"],label[for="note"]');
    labels.forEach(l => l.style.display = "");
    
    // restore original tip copy (what you had before)
    const tipEl = document.querySelector('.hint .small');
    if (tipEl) {
      tipEl.innerHTML = `
        Tips:
        <ul>
          <li>Nodes are auto-created when you add an interaction.</li>
          <li>Hover edges to see PMIDs in Operations / Details.</li>
          <li>Export JSON to share the “official” class network.</li>
        </ul>
      `;
    }

    setStatusText(initialElements.length ? "Loaded saved network from this browser." : "Ready.");
    return;
  }

  // VIEW-ONLY: hide editing controls
  const idsToHide = [
    "source","target","itype","autolayout","pmid","note",
    "addEdge","clear","exportSvg","deleteNode","deleteEdge","importJson","doImport","jsonBox"
  ];

  for (const id of idsToHide) {
    const el = document.getElementById(id);
    if (el) el.style.display = "none";
  }

  // hide their labels (best-effort)
  const labels = document.querySelectorAll('label[for="source"],label[for="target"],label[for="itype"],label[for="autolayout"],label[for="pmid"],label[for="note"]');
  labels.forEach(l => l.style.display = "none");

  // replace left-panel hint copy with view-only instructions
  const tipEl = document.querySelector('.hint .small');
  if (tipEl) {
    tipEl.innerHTML = `
      <p>
        You are viewing a genetic network based on published research.
        If you would like to learn more about the evidence supporting the mapped connections,
        click on any corresponding arrow or T-bar and follow the PMID link to the corresponding PubMed page
        in the window below.
      </p>
    `;
  }

  setStatusText("View-only mode (editing disabled).");
}


  function normGene(s) {
    return (s || "").trim();
  }

  function isValidPmid(s) {
    // PubMed IDs are digits; length varies. We'll accept 1..10 digits to be permissive.
    return /^[0-9]{1,10}$/.test((s || "").trim());
  }

  function edgeId(src, tgt, type) {
    return `e:${src}->${tgt}:${type}`;
  }

  // --- Load initial graph from localStorage (or empty) ---
  let saved = null;
  try {
    saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "null");
  } catch (_) {}

  const initialElements = saved?.elements || [];

  // --- Cytoscape init ---
  if (typeof cytoscapeDagre !== "undefined") {
    // plugin loaded
  }

  const cy = cytoscape({
    container: document.getElementById("cy"),
    elements: initialElements,
    style: [
      {
        selector: "node",
        style: {
          "shape": "round-rectangle",
          "background-opacity": 0,
          "border-width": 2,
          "border-color": "#666",
          "label": "data(label)",
          "text-valign": "center",
          "text-halign": "center",
          "width": "label",     // auto-resizing of nodes
          "height": "label",
          "padding": "10px",    // spacing around text
          "font-size": 14
        }
      },
      {
        selector: "edge",
        style: {
          "curve-style": "bezier",
          "width": 2,
          "arrow-scale": 1.1,
          "label": ""
        }
      },
      {
        selector: 'edge[type = "inhibits"]',
        style: {
          "target-arrow-shape": "tee",
          "line-color": "#c62828",
          "target-arrow-color": "#c62828"
        }
      },
      {
        selector: 'edge[type = "activates"]',
        style: {
          "target-arrow-shape": "triangle",
          "line-color": "#2e7d32",
          "target-arrow-color": "#2e7d32"
        }
      },
      {
        selector: ":selected",
        style: {
          "border-color": "#0b5fff",
          "line-color": "#0b5fff",
          "target-arrow-color": "#0b5fff"
        }
      }
    ],
    layout: { name: "grid" }
  });

  console.log("initialElements.length =", initialElements.length);
  console.log("cy.elements().length (after init) =", cy.elements().length);
  
  // Prevent edges from ever being “grabbed”
  cy.edges().ungrabify();

  if (IS_VIEW_ONLY) {
  cy.autoungrabify(true);
  cy.autounselectify(false);
  cy.boxSelectionEnabled(false);
  cy.userPanningEnabled(true);
  cy.userZoomingEnabled(true);
}

applyModeUI();

function save() {
  if (IS_VIEW_ONLY) return;

  const elements = cy.json().elements;

  const positions = cy.nodes().map(n => ({
    id: n.id(),
    position: { ...n.position() }
  }));

  const viewport = {
    zoom: cy.zoom(),
    pan: { ...cy.pan() }
  };

  const payload = { elements, positions, viewport };
  localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
}

document.getElementById("deleteNode")?.addEventListener("click", () => {
  if (IS_VIEW_ONLY) {
    setStatusText("View-only mode: editing is disabled.");
    return;
  }

  const selectedNodes = cy.nodes(":selected");
  if (selectedNodes.empty()) {
    setStatusText("No node selected. Click a node, then try again.");
    return;
  }

  const labels = selectedNodes.map(n => n.data("label")).join(", ");
  if (!confirm(`Delete selected node(s): ${labels} ? This will also remove connected edges.`)) {
    setStatusText("Delete cancelled.");
    return;
  }

  selectedNodes.remove();
  save();
  setStatusText(`Deleted: ${labels}`);
});

document.getElementById("deleteEdge")?.addEventListener("click", () => {
  if (IS_VIEW_ONLY) {
    setStatusText("View-only mode: editing is disabled.");
    return;
  }

  const selectedEdges = cy.edges(":selected");
  if (selectedEdges.empty()) {
    setStatusText("No edge selected. Click an edge, then try again.");
    return;
  }

  const summaries = selectedEdges.map(e => {
    const src = e.source().data("label");
    const tgt = e.target().data("label");
    const type = e.data("type");
    return `${src} ${type} ${tgt}`;
  }).join("; ");

  if (!confirm(`Delete selected edge(s): ${summaries} ?`)) {
    setStatusText("Delete cancelled.");
    return;
  }

  selectedEdges.remove();
  save();
  setStatusText("Deleted selected edge(s).");
});
  
function downloadBlob(filename, blob) {
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

document.getElementById("exportPng").addEventListener("click", () => {
  // higher scale = sharper for slides
  const pngDataUrl = cy.png({ full: true, scale: 2, bg: "white" });

  const a = document.createElement("a");
  a.href = pngDataUrl;
  a.download = "genetic-network.png";
  document.body.appendChild(a);
  a.click();
  a.remove();

  setStatusText("Exported PNG.");
});
  
document.getElementById("exportSvg").addEventListener("click", () => {
  if (typeof cy.svg !== "function") {
    setStatusText("SVG export not available (plugin blocked).");
    return;
  }

  const svgText = cy.svg({ full: true, scale: 1, bg: "white" });
  const blob = new Blob([svgText], { type: "image/svg+xml;charset=utf-8" });
  downloadBlob("genetic-network.svg", blob);

  setStatusText("Exported SVG.");
});

let saveTimer = null;
function saveSoon() {
  clearTimeout(saveTimer);
  saveTimer = setTimeout(save, 150);
}

// Save whenever any node moves
cy.on("position", "node", saveSoon);
cy.on("zoom pan", saveSoon);


  // Restore saved positions (if any)
if (saved?.positions?.length) {
  for (const p of saved.positions) {
    const n = cy.getElementById(p.id);
    if (!n.empty() && p.position) {
      n.position(p.position);
    }
  }
}

  if (saved?.positions?.length) {
  const sel = document.getElementById("autolayout");
  if (sel) sel.value = "off";
}

  function autoLayoutEnabled() {
  const sel = document.getElementById("autolayout");
  return !sel || sel.value === "on";
}

  if (saved?.viewport) {
  if (typeof saved.viewport.zoom === "number") cy.zoom(saved.viewport.zoom);
  if (saved.viewport.pan) cy.pan(saved.viewport.pan);
} else {
  // If no saved viewport, fit everything nicely
  cy.fit(undefined, 40); // padding
}

function runLayout() {
  if (!autoLayoutEnabled()) return;

  const hasDagre = (typeof cytoscapeDagre !== "undefined");
  const layoutName = (cytoscapeDagre ? "dagre" : "cose");
  const layout = cy.layout({
    name: layoutName,
    animate: true,
    animationDuration: 350,
    rankDir: "LR",
    nodeSep: 40,
    edgeSep: 10,
    rankSep: 60
  });
  layout.run();
}

  if (!saved?.positions?.length) runLayout();

// ---- Ensure viewer actually shows the graph ----
// sometimes Cytoscape initializes before the DOM/iframe has final size, which
// can leave the graph off-screen or invisibly zoomed. Force a resize+fit
// shortly after load (and also when window resizes).
setTimeout(() => {
  try {
    console.log("post-init: cy.elements().length =", cy.elements().length);
    if (cy.elements().length > 0) {
      cy.resize();        // tell cytoscape its container size may have changed
      cy.fit(undefined, 40); // fit graph into view with some padding
      // optional: center() instead of fit() if you prefer
      // cy.center();
    }
  } catch (err) {
    console.error("cy fit error:", err);
  }
}, 100);

// Also re-fit on window resize (useful for responsive/iframe environments)
window.addEventListener("resize", () => {
  try {
    if (cy && cy.elements().length > 0) {
      cy.resize();
      // don't always call fit on resize (that can be annoying);
      // here we do a gentle recenter if zoom level is extreme:
      const z = cy.zoom();
      if (z < 0.05 || z > 10) {
        cy.fit(undefined, 40);
      }
    }
  } catch (e) { /* ignore */ }
});
  
// --- Activate PMID links
function pmidLink(pmid) {
  const clean = String(pmid).trim();
  const url = `https://pubmed.ncbi.nlm.nih.gov/${encodeURIComponent(clean)}/`;
  // Escape the visible text, but keep the anchor HTML
  return `<a href="${url}" target="_blank" rel="noopener noreferrer">${escapeHtml(clean)}</a>`;
}

// Simple HTML escaping for notes
function escapeHtml(str) {
  return String(str)
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;")
    .replaceAll('"', "&quot;")
    .replaceAll("'", "&#039;");
}

// --- Optional: cache for PMID → title ---
const PM_TITLE_CACHE = {};

// Try to fetch a title for a PubMed ID. Returns null on failure so UI can silently ignore problems.
async function fetchPmidTitle(pmid) {
  const clean = String(pmid).trim();
  if (!clean) return null;

  if (PM_TITLE_CACHE[clean]) {
    return PM_TITLE_CACHE[clean];
  }

  try {
    const resp = await fetch(
      `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi` +
      `?db=pubmed&id=${encodeURIComponent(clean)}&retmode=json`
    );
    if (!resp.ok) return null;

    const data = await resp.json();
    const title = data?.result?.[clean]?.title;
    if (!title) return null;

    PM_TITLE_CACHE[clean] = title;
    return title;
  } catch (e) {
    console.error("Error fetching PubMed title for", clean, e);
    return null;
  }
}

// Nice-to-have: click on edge shows PMID in status window
cy.on("click", "edge", (evt) => {
  const e    = evt.target;
  
  // Force selection to follow the clicked edge
  cy.$(":selected").unselect();
  e.select();
  
  const src  = e.source().data("label");
  const tgt  = e.target().data("label");
  const type = e.data("type");
  const note = e.data("note") || "";
  const pmids = e.data("pmids") || [];

  const pmidHtml = pmids.length
    ? pmids.map(p => pmidLink(p)).join(", ")
    : "(none)";

  // Initial render: always show clickable PMIDs right away
  setStatusHtml(`
    <div style="line-height:1.35;">
      <div><b>${escapeHtml(src)}</b> ${escapeHtml(type)} <b>${escapeHtml(tgt)}</b></div>
      <div style="margin-top:6px;"><b>PMID:</b> ${pmidHtml}</div>
      <div id="pmid-title-line" style="margin-top:6px; display:none;"></div>
      ${note ? `<div style="margin-top:6px;"><b>Note:</b> ${escapeHtml(note)}</div>` : ""}
    </div>
  `);

  // Unselects edge when user clicks on canvas
  cy.on("click", (evt) => {
  if (evt.target === cy) cy.$(":selected").unselect();
  });

  // Optional: fetch the first PMID's title in the background
  if (pmids.length) {
    const first = pmids[0];
    fetchPmidTitle(first).then(title => {
      if (!title) return;
      const titleDiv = document.getElementById("pmid-title-line");
      if (!titleDiv) return;
      titleDiv.style.display = "block";
      titleDiv.innerHTML = `<b>Title:</b> ${escapeHtml(title)}`;
    });
  }

  // Just in case anything feels "grabbed"
  cy.trigger("free");
});


// --- Ensure node exists ---
function ensureNode(gene) {
  const id = `n:${gene}`;
  let n = cy.getElementById(id);
  if (n.empty()) {
    cy.add({ group: "nodes", data: { id, label: gene } });
  }
  return id;
}

  // --- Add/update edge logic ---
  document.getElementById("addEdge").addEventListener("click", () => {
  if (IS_VIEW_ONLY) {
    setStatusText("View-only mode: editing is disabled.");
    return;
  }

  const src  = normGene(document.getElementById("source").value);
  const tgt  = normGene(document.getElementById("target").value);
  const type = document.getElementById("itype").value;
  const pmid = (document.getElementById("pmid").value || "").trim();
  const note = (document.getElementById("note").value || "").trim();

  if (!src || !tgt) {
    setStatusText("Please enter both source and target genes.");
    return;
  }
  if (pmid && !isValidPmid(pmid)) {
    setStatusText("PMID should be digits only (e.g., 12345678).");
    return;
  }

  // --- remember which nodes already exist (so we only reposition NEW ones) ---
  const srcNodeId = `n:${src}`;
  const tgtNodeId = `n:${tgt}`;
  const srcWasNew = cy.getElementById(srcNodeId).empty();
  const tgtWasNew = cy.getElementById(tgtNodeId).empty();

  // --- ensure nodes exist (use your SIMPLE ensureNode(gene) version) ---
  const srcId = ensureNode(src);
  const tgtId = ensureNode(tgt);

  // --- if auto-layout is OFF, place new nodes near the existing one (or as a pair) ---
  if (!autoLayoutEnabled() && (srcWasNew || tgtWasNew)) {
    const srcNode = cy.getElementById(srcId);
    const tgtNode = cy.getElementById(tgtId);

    const center = {
      x: cy.pan().x + cy.width() / 2,
      y: cy.pan().y + cy.height() / 2
    };

    const jitter = () => (Math.random() - 0.5) * 20; // +/-10px
    const dx = 160;

    if (srcWasNew && !tgtWasNew) {
      const a = tgtNode.position();
      srcNode.position({ x: a.x - dx + jitter(), y: a.y + jitter() });
    } else if (!srcWasNew && tgtWasNew) {
      const a = srcNode.position();
      tgtNode.position({ x: a.x + dx + jitter(), y: a.y + jitter() });
    } else if (srcWasNew && tgtWasNew) {
      srcNode.position({ x: center.x - dx / 2 + jitter(), y: center.y + jitter() });
      tgtNode.position({ x: center.x + dx / 2 + jitter(), y: center.y + jitter() });
    }
  }

  // --- add/update edge ---
  const eid = edgeId(src, tgt, type);
  let edge = cy.getElementById(eid);

  if (edge.empty()) {
    cy.add({
      group: "edges",
      data: {
        id: eid,
        source: srcId,
        target: tgtId,
        type,
        pmids: pmid ? [pmid] : [],
        note
      }
    });
    setStatusText(`Added: ${src} ${type} ${tgt}${pmid ? ` (PMID ${pmid})` : ""}`);
  } else {
    const pmids = edge.data("pmids") || [];
    if (pmid && !pmids.includes(pmid)) pmids.push(pmid);
    edge.data("pmids", pmids);
    if (note) edge.data("note", note);
    setStatusText(`Updated edge. PMID list: ${pmids.join(", ") || "(none)"}`);
  }

  runLayout();
  save();
});


  // --- Clear network ---
  document.getElementById("clear").addEventListener("click", () => {
   if (IS_VIEW_ONLY) {
    setStatusText("View-only mode: editing is disabled.");
    return;
    }
    cy.elements().remove();
    save();
    setStatusText("Cleared network.");
  });

  // --- Export / Import ---
  const jsonBox = document.getElementById("jsonBox");
  const doImportBtn = document.getElementById("doImport");

  document.getElementById("exportJson").addEventListener("click", () => {
  const elements = cy.json().elements;
  const positions = cy.nodes().map(n => ({
    id: n.id(),
    position: { ...n.position() }
  }));
  const viewport = { zoom: cy.zoom(), pan: { ...cy.pan() } };
  const payload = { elements, positions, viewport };

  jsonBox.style.display = "block";
  doImportBtn.style.display = "none";
  jsonBox.value = JSON.stringify(payload, null, 2);
  jsonBox.focus();
  jsonBox.select();
  setStatusText("Exported JSON below. Copy it to share/save.");
});

  document.getElementById("importJson").addEventListener("click", () => {
    if (IS_VIEW_ONLY) {
     setStatusText("View-only mode: editing is disabled.");
     return;
    }
    jsonBox.style.display = "block";
    doImportBtn.style.display = "block";
    jsonBox.value = "";
    setStatusText("Paste JSON below, then click 'Load pasted JSON'.");
    jsonBox.focus();
  });

  doImportBtn.addEventListener("click", () => {
    if (IS_VIEW_ONLY) {
     setStatusText("View-only mode: editing is disabled.");
     return;
    }
  try {
    const payload = JSON.parse(jsonBox.value);
    if (!payload?.elements) throw new Error("Missing 'elements' field.");

    cy.elements().remove();
    cy.add(payload.elements);

    // If imported JSON includes positions, apply them
    if (payload?.positions?.length) {
      for (const p of payload.positions) {
        const n = cy.getElementById(p.id);
        if (!n.empty() && p.position) n.position(p.position);
      }
    } else {
      runLayout();
    }
    
    if (payload?.viewport) {
      if (typeof payload.viewport.zoom === "number") cy.zoom(payload.viewport.zoom);
      if (payload.viewport.pan) cy.pan(payload.viewport.pan);
    } else {
      cy.fit(undefined, 40);
    }

    save();
    setStatusText("Imported network from JSON.");
  } catch (e) {
    setStatusText("Import failed: " + e.message);
  }
});

  setStatusText(initialElements.length ? "Loaded saved network from this browser." : "Ready.");
</script>
</body>
</html>
